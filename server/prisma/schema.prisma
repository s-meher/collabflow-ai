generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id        String        @id @default(cuid())
  email     String        @unique
  name      String?
  createdAt DateTime      @default(now())
  workspaces Workspace[]  // many to many with Workspace
  changes   DocumentChange[]
}

model Workspace {
  id        String     @id @default(cuid())
  title     String
  createdAt DateTime   @default(now())
  documents Document[]
  users     User[]      // many to many with User
}


model Document {
  id          String           @id @default(cuid())
  title       String
  type        String           // "text", "board", etc
  content     String?
  createdAt   DateTime         @default(now())
  workspace   Workspace        @relation(fields: [workspaceId], references: [id])
  workspaceId String
  changes     DocumentChange[]
}

model DocumentChange {
  id         String     @id @default(cuid())
  document   Document   @relation(fields: [documentId], references: [id])
  documentId String
  user       User       @relation(fields: [userId], references: [id])
  userId     String
  content    String
  createdAt  DateTime   @default(now())
}